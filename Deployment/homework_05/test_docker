import requests

client = {
    "lead_source": "organic_search",
    "number_of_courses_viewed": 4,
    "annual_income": 80304.0
}

url = "http://localhost:8000/predict"

try:
    response = requests.post(url, json=client)
    result = response.json()
    
    print("Full response:")
    print(result)
    
    probability = result["conversion_probability"]
    print(f"\nProbability that this lead will convert: {probability:.3f}")
    
    # Check which option matches
    options = [0.39, 0.59, 0.79, 0.99]
    closest_match = min(options, key=lambda x: abs(x - probability))
    
    print(f"Closest match from options: {closest_match}")
    
    # Exact match check
    if abs(probability - 0.39) < 0.01:
        print("✓ The probability is 0.39")
    elif abs(probability - 0.59) < 0.01:
        print("✓ The probability is 0.59")
    elif abs(probability - 0.79) < 0.01:
        print("✓ The probability is 0.79")
    elif abs(probability - 0.99) < 0.01:
        print("✓ The probability is 0.99")
        
except Exception as e:
    print(f"Error: {e}")