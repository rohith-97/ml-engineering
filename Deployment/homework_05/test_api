import requests

# Client data
client = {
    "lead_source": "organic_search",
    "number_of_courses_viewed": 4,
    "annual_income": 80304.0
}

# URL
url = "http://localhost:8000/predict"

try:
    response = requests.post(url, json=client)
    result = response.json()
    
    print("Full response:")
    print(result)
    
    if "conversion_probability" in result:
        prob = result["conversion_probability"]
        print(f"\nProbability that this client will get a subscription: {prob:.3f}")
        
        # Check which option matches
        options = [0.334, 0.534, 0.734, 0.934]
        closest_match = min(options, key=lambda x: abs(x - prob))
        
        print(f"Closest match from options: {closest_match}")
        
        # Exact match check
        if abs(prob - 0.334) < 0.01:
            print("✓ The probability is 0.334")
        elif abs(prob - 0.534) < 0.01:
            print("✓ The probability is 0.534")
        elif abs(prob - 0.734) < 0.01:
            print("✓ The probability is 0.734")
        elif abs(prob - 0.934) < 0.01:
            print("✓ The probability is 0.934")
    else:
        print("Error in response:", result)

except Exception as e:
    print(f"Error making request: {e}")